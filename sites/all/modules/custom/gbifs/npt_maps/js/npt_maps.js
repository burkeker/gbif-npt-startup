(function($){
  Drupal.GM3.npt_country_mask = function(map){

    if (map.google_map) {
      /*
      var maskLayer = new google.maps.KmlLayer({
        url: 'http://bkotemp.gbif.org/map/BEN_adm0.kmz'
      });
      maskLayer.setMap(map.google_map);
      */
      
      var elevator;

      var wkt="POLYGON((40 -40,40 40,-30 40,-30 -40,40 -40),(3.316373999999968 11.886906495117174,3.327473999999967 11.883906495117174,3.353573999999952 11.885006495117167,3.359473999999977 11.886406495117171,3.372173999999973 11.894206495117174,3.37807399999997 11.895306495117168,3.468873999999971 11.855806495117179,3.473573999999957 11.853606495117177,3.497773999999964 11.835506495117173,3.507173999999964 11.825506495117168,3.51337399999997 11.817806495117168,3.546073999999976 11.774406495117177,3.554173999999961 11.743306495117167,3.556073999999967 11.738306495117172,3.558873999999975 11.734206495117178,3.56217399999997 11.730506495117169,3.604473999999954 11.69330649511717,3.574173999999971 11.655006495117178,3.568373999999977 11.646906495117179,3.525273999999968 11.56360649511717,3.474973999999975 11.429706495117173,3.608873999999958 11.250006495117177,3.694673999999964 11.134706495117172,3.714173999999957 11.127206495117179,3.735773999999964 11.120606495117173,3.728573999999952 11.084206495117172,3.728873999999962 11.070806495117168,3.730573999999962 11.040506495117171,3.73167399999997 11.029406495117172,3.732773999999978 11.023906495117174,3.738873999999953 11.016106495117171,3.747173999999973 11.011706495117167,3.775273999999968 10.898606495117178,3.759473999999955 10.847506495117173,3.754973999999976 10.839406495117174,3.748873999999972 10.831406495117179,3.746673999999956 10.826706495117179,3.745873999999958 10.820306495117165,3.748573999999962 10.803006495117174,3.753873999999968 10.794406495117173,3.785573999999968 10.756906495117178,3.826073999999977 10.714206495117168,3.83557399999998 10.709706495117175,3.846673999999979 10.703006495117165,3.848373999999978 10.690006495117174,3.85497399999997 10.58500649511717,3.812773999999962 10.449406495117174,3.793573999999978 10.405506495117166,3.789473999999956 10.402806495117176,3.768573999999973 10.410506495117176,3.759173999999973 10.415006495117169,3.740573999999953 10.425306495117169,3.728373999999974 10.433906495117171,3.706373999999954 10.447206495117172,3.701373999999959 10.449406495117174,3.695273999999955 10.450306495117175,3.68887399999997 10.449706495117169,3.683873999999975 10.44800649511717,3.639973999999967 10.415506495117171,3.637173999999959 10.411706495117173,3.581973999999974 10.275306495117178,3.644173999999964 10.199406495117174,3.657173999999969 10.192806495117168,3.666973999999954 10.188306495117175,3.676673999999963 10.183906495117171,3.680573999999979 10.180806495117167,3.683873999999975 10.170506495117166,3.684473999999966 10.151106495117176,3.679973999999959 10.120306495117177,3.675873999999965 10.103306495117167,3.616073999999969 9.962206495117172,3.609473999999977 9.94800649511717,3.60637399999996 9.943906495117176,3.558873999999975 9.880306495117168,3.525273999999968 9.844206495117177,3.52107399999997 9.84440649511717,3.512173999999959 9.849406495117165,3.501973999999962 9.853306495117167,3.483873999999958 9.856706495117166,3.476973999999956 9.856906495117173,3.471373999999969 9.855806495117179,3.353873999999962 9.815806495117172,3.346673999999979 9.809206495117166,3.343873999999971 9.805006495117169,3.336373999999978 9.791406495117172,3.331673999999964 9.775306495117178,3.330873999999966 9.768906495117179,3.331073999999973 9.75580649511717,3.337173999999976 9.735006495117176,3.352773999999954 9.703006495117165,3.363373999999965 9.681906495117175,3.317173999999966 9.636106495117176,3.171373999999958 9.496406495117171,3.141673999999966 9.441106495117168,3.141973999999976 9.429206495117171,3.144973999999962 9.41890649511717,3.152173999999974 9.405506495117166,3.159973999999977 9.386106495117176,3.165873999999974 9.371406495117171,3.166973999999954 9.36580649511717,3.166373999999962 9.302806495117167,3.131373999999965 9.194406495117178,3.094973999999979 9.090506495117168,3.004973999999976 9.06530649511717,2.987473999999963 9.061106495117173,2.967473999999953 9.081706495117174,2.905273999999963 9.078906495117167,2.81357399999996 9.06530649511717,2.794673999999958 9.056906495117175,2.789473999999956 9.04390649511717,2.783073999999971 9.016706495117177,2.745273999999966 8.795306495117174,2.742973999999975 8.770806495117171,2.746973999999966 8.71940649511717,2.756373999999965 8.581906495117167,2.756373999999965 8.555306495117165,2.753273999999976 8.535706495117168,2.759673999999961 8.529706495117168,2.762773999999979 8.519206495117174,2.758373999999975 8.491106495117165,2.752473999999978 8.461906495117177,2.747473999999954 8.453006495117165,2.728873999999962 8.437206495117167,2.723073999999968 8.429206495117171,2.720873999999952 8.424406495117168,2.71027399999997 8.351906495117177,2.709173999999962 8.338906495117172,2.70997399999996 8.326406495117169,2.728073999999964 8.256706495117172,2.733373999999969 8.248306495117177,2.739973999999961 8.241106495117165,2.742773999999969 8.236906495117168,2.75107399999996 8.218006495117166,2.753573999999958 8.206906495117167,2.75107399999996 8.195506495117172,2.741373999999979 8.156106495117172,2.727473999999972 8.108306495117176,2.708873999999952 8.008006495117172,2.692473999999976 7.906406495117167,2.695273999999955 7.882206495117174,2.702973999999955 7.865006495117171,2.737473999999963 7.817806495117168,2.740273999999971 7.81360649511717,2.742173999999977 7.808606495117175,2.743073999999979 7.796406495117168,2.742773999999969 7.782806495117171,2.738573999999971 7.71640649511717,2.732973999999956 7.65820649511717,2.732173999999958 7.651906495117174,2.736673999999965 7.596406495117165,2.769973999999962 7.254406495117166,2.778573999999963 7.134406495117176,2.74967399999997 7.094206495117177,2.725273999999956 6.954406495117169,2.726373999999964 6.948906495117171,2.728373999999974 6.944206495117172,2.73167399999997 6.940506495117177,2.747173999999973 6.928606495117165,2.750573999999972 6.925006495117174,2.75337399999998 6.920806495117176,2.756373999999965 6.910506495117176,2.762773999999979 6.765006495117177,2.761673999999971 6.671406495117168,2.756673999999975 6.570806495117168,2.754173999999978 6.559406495117173,2.727173999999962 6.474706495117175,2.719573999999966 6.452206495117167,2.719573999999966 6.365506495117174,2.643073999999956 6.356106495117174,2.539973999999972 6.345006495117175,2.484373999999974 6.340506495117168,2.47997399999997 6.338606495117176,2.454973999999964 6.333006495117175,2.404673999999972 6.330006495117175,2.369673999999975 6.330306495117171,2.355873999999972 6.330506495117177,2.331073999999973 6.328606495117171,2.275873999999959 6.323306495117166,2.056073999999967 6.294206495117166,1.98737399999996 6.282106495117176,1.926973999999973 6.275306495117178,1.803373999999963 6.25750649511717,1.697473999999971 6.238006495117176,1.639973999999967 6.221106495117169,1.635373999999956 6.218706495117175,1.630573999999967 6.232206495117168,1.628973999999971 6.238006495117176,1.652473999999955 6.250306495117172,1.675573999999955 6.258306495117168,1.68087399999996 6.259706495117172,1.700273999999979 6.261906495117174,1.742473999999959 6.269706495117177,1.798573999999974 6.280706495117172,1.795273999999978 6.308306495117165,1.77247399999996 6.412506495117171,1.770573999999954 6.417206495117171,1.749173999999954 6.456706495117174,1.693073999999967 6.549206495117176,1.670273999999978 6.575806495117178,1.666373999999962 6.578906495117167,1.661373999999967 6.578306495117175,1.658073999999971 6.575006495117165,1.655373999999966 6.570706495117179,1.64747399999996 6.57300649511717,1.619173999999958 6.591706495117165,1.614473999999973 6.600806495117169,1.575273999999979 6.679706495117173,1.588573999999966 6.713606495117176,1.591673999999955 6.717806495117173,1.607473999999968 6.796706495117178,1.609173999999967 6.88080649511717,1.606073999999978 6.895306495117168,1.603373999999974 6.899406495117177,1.598073999999968 6.901706495117168,1.576973999999979 6.909306495117178,1.56387399999997 6.943006495117174,1.560873999999956 6.953306495117175,1.54847399999997 6.995206495117174,1.55217399999998 6.996706495117166,1.557373999999953 6.997206495117169,1.642473999999964 6.995506495117169,1.645573999999954 7.333906495117176,1.643773999999979 7.409706495117177,1.644473999999974 7.443006495117174,1.649673999999976 7.510806495117166,1.650573999999978 7.516906495117169,1.655373999999966 7.529806495117171,1.651973999999967 7.542206495117171,1.649473999999969 7.55330649511717,1.642473999999964 7.620006495117167,1.641373999999956 7.636406495117171,1.639173999999969 7.757806495117165,1.639473999999979 7.761906495117174,1.638073999999961 7.998606495117173,1.634673999999961 8.357806495117174,1.627173999999968 8.362806495117169,1.617073999999974 8.36710649511717,1.624173999999954 8.425306495117169,1.625373999999965 8.587306495117176,1.62607399999996 8.72670649511717,1.626673999999952 8.846906495117167,1.620573999999976 9.026906495117174,1.619973999999957 9.033306495117174,1.617773999999969 9.049706495117178,1.607773999999978 9.094206495117177,1.60637399999996 9.099706495117175,1.601973999999956 9.108606495117172,1.569973999999974 9.165806495117167,1.567173999999966 9.170006495117178,1.551673999999963 9.182206495117171,1.543373999999972 9.187806495117172,1.538573999999954 9.190006495117174,1.526373999999976 9.198606495117176,1.510573999999963 9.210806495117168,1.493573999999967 9.228306495117167,1.452473999999967 9.280406495117177,1.431673999999958 9.301206495117171,1.41947399999998 9.316906495117166,1.416673999999972 9.321106495117178,1.406973999999963 9.344706495117165,1.400273999999968 9.378606495117168,1.398573999999968 9.397206495117175,1.398573999999968 9.429906495117166,1.393073999999956 9.479206495117168,1.388573999999977 9.492206495117173,1.384973999999971 9.494406495117175,1.364273999999966 9.481306495117167,1.361073999999974 9.485506495117178,1.337473999999958 9.542506495117166,1.36837399999996 9.596706495117175,1.369973999999957 9.636406495117171,1.358873999999958 9.914706495117173,1.35497399999997 9.995306495117177,1.307773999999966 10.025306495117178,1.18717399999997 10.100006495117171,1.172373999999962 10.108606495117172,1.066973999999959 10.174406495117168,0.99937399999996 10.220106495117179,0.776673999999957 10.376706495117176,0.785273999999959 10.524406495117177,0.789673999999962 10.534206495117175,0.795573999999959 10.542206495117171,0.800573999999955 10.551106495117168,0.804973999999959 10.567506495117172,0.806973999999968 10.579706495117165,0.807473999999957 10.607206495117168,0.804673999999977 10.638306495117178,0.803373999999963 10.643906495117179,0.800273999999973 10.681106495117177,0.800573999999955 10.701706495117179,0.80217399999998 10.712406495117179,0.804473999999971 10.718906495117167,0.809673999999973 10.727806495117179,0.879473999999959 10.799706495117178,0.893573999999973 10.866906495117178,0.890573999999958 10.911106495117167,0.917973999999958 10.996406495117171,0.950273999999979 11.029406495117172,0.985273999999976 11.079406495117169,1.083073999999954 11.122506495117179,1.148873999999978 11.224406495117165,1.192773999999957 11.265306495117173,1.264673999999957 11.246106495117175,1.351073999999954 11.302506495117171,1.347773999999959 11.311706495117178,1.341673999999955 11.319406495117178,1.334673999999978 11.326406495117169,1.329473999999976 11.334706495117175,1.327473999999967 11.33970649511717,1.326973999999979 11.345806495117174,1.328373999999968 11.351406495117175,1.386673999999971 11.429706495117173,1.393373999999966 11.437206495117167,1.411073999999957 11.447206495117172,1.422473999999966 11.452206495117167,1.428573999999969 11.451506495117172,1.435273999999964 11.458906495117176,1.482473999999968 11.459706495117175,1.539973999999972 11.458006495117175,1.546373999999958 11.457506495117173,1.568573999999956 11.452506495117177,1.571373999999963 11.449706495117169,1.582773999999972 11.424206495117176,1.584173999999962 11.405306495117173,1.58557399999998 11.399706495117172,1.593073999999973 11.393306495117173,1.609173999999967 11.388306495117178,1.615573999999953 11.388606495117173,1.736973999999975 11.415806495117167,1.803873999999979 11.439406495117169,1.862173999999953 11.445306495117165,1.868573999999967 11.445806495117168,1.880573999999967 11.443606495117166,1.887173999999959 11.436406495117168,1.891373999999956 11.433606495117175,1.902973999999972 11.429406495117178,1.985873999999967 11.417206495117171,1.992773999999969 11.416906495117175,2.004973999999976 11.418606495117174,2.014673999999957 11.422506495117176,2.020073999999966 11.426106495117168,2.026973999999967 11.431106495117177,2.05217399999998 11.454706495117165,2.193873999999965 11.603606495117177,2.256073999999956 11.641706495117177,2.268373999999966 11.650306495117178,2.308873999999975 11.688306495117175,2.340873999999957 11.768606495117169,2.392473999999964 11.887206495117169,2.397973999999977 11.896106495117166,2.401673999999957 11.957206495117177,2.403573999999963 12.084406495117179,2.389973999999967 12.124206495117178,2.387473999999969 12.135306495117177,2.37637399999997 12.206706495117174,2.37637399999997 12.235006495117176,2.37807399999997 12.240306495117167,2.385273999999953 12.246906495117173,2.389473999999979 12.249706495117167,2.394473999999974 12.251706495117176,2.535873999999978 12.281106495117172,2.611673999999965 12.292506495117166,2.664973999999972 12.302806495117167,2.712273999999979 12.348906495117177,2.725873999999976 12.356106495117174,2.775273999999968 12.380006495117172,2.785273999999959 12.383906495117174,2.838573999999966 12.396706495117172,2.85667399999997 12.387206495117169,2.872473999999954 12.376406495117166,3.010073999999975 12.268606495117169,3.162273999999968 12.113306495117172,3.250673999999975 12.020806495117171,3.253973999999971 12.017206495117165,3.257973999999962 12.00750649511717,3.259273999999976 12.000006495117177,3.261673999999971 11.977806495117179,3.269973999999962 11.951906495117171,3.298073999999957 11.910306495117169,3.31217399999997 11.890006495117177,3.316373999999968 11.886906495117174))";



      //using regex, we will get the indivudal Rings
      var regex = /\(([^()]+)\)/g;
      var Rings = [];
      var results;
      while( results = regex.exec(wkt) ) {
        Rings.push( results[1] );
      }

      var ptsArray = [];

      var polyLen = Rings.length;

      //now we need to draw the polygon for each of inner rings, but reversed
      for ( var i = 0; i < polyLen ; i++){
        AddPoints(Rings[i]);
      }

      var poly = new google.maps.Polygon({
          paths: ptsArray,
          strokeColor: '#1E90FF',
          strokeOpacity: 0.8,
          strokeWeight: 0,
          fillColor: '#666',
          fillOpacity: 0.5
        });

      poly.setMap(map.google_map);

      //function to add points from individual rings
      function AddPoints(data){
        //first spilt the string into individual points
        var pointsData = data.split(",");


        //iterate over each points data and create a latlong
        //& add it to the cords array
        var len = pointsData.length;
        for ( var i = 0; i < len; i++) {
          var xy = pointsData[i].split(" ");

          var pt = new google.maps.LatLng(xy[1],xy[0]);
          ptsArray.push(pt);
        }
      }
    }
    

    /* Add a toggle button.
    $('#'+this.GM3.id).parent().append('<div class="gbif-toggle" style="position:relative; top:-20px;left:200px;height:0px;"><form><input id="gbif-toggle" type="checkbox" checked="checked"><label class="option" for="gbif-toggle">'+Drupal.t('GBIF data')+'</label></form></div>');
    var self = this;
    $('#gbif-toggle').change(function(){
      if($('#gbif-toggle').attr('checked')){
        self.GM3.google_map.overlayMapTypes.insertAt(0, self.overlay);        
      } else {
        self.GM3.google_map.overlayMapTypes.removeAt(0);  
      }
    });
    */
  }
})(jQuery);