<?php
/**
 * @file
*
* Test case for scratchpads solr with selenium
*/
if(!class_exists('DrupalSeleniumWebTestCase')){
  drupal_set_message(t('Selenium tests are not displayed because the selenium module is not enabled.'), 'warning', FALSE);
  return;
}

class ScratchpadsSolrSeleniumTestCase extends ScratchpadsTweaksSeleniumTestCase{

  protected $admin_user;

  public static function getInfo(){
    return array(
      'name' => 'Scratchpads Solr (Selenium)',
      'description' => 'Tests solr search with default scratchpads content types',
      'group' => 'Scratchpads',
      'browsers' => array(
        'firefox'
      )
    );
  }

  public function setUp(){
    parent::setUp();
    $default_permissions = module_invoke_all('scratchpads_default_permissions');
    $admin_user_permissions = $default_permissions['maintainer'];
    $anon_user_permissions = $default_permissions['anonymous user'];
    $admin_user_permissions[] = 'access content overview';
    $admin_user_permissions[] = 'administer search';
    foreach($anon_user_permissions as $anon_perm){
      $admin_user_permissions[] = $anon_perm;
    }
    $this->admin_user = $this->drupalCreateUserWithName($admin_user_permissions, 'admin_user_name');
    legal_save_accept(1, 1, 'en', $this->admin_user->uid);
  }

  /**
   * A wrapper for the following tests
   */
  function testWrapper(){
    $this->drupalLogin($this->admin_user); 
    $this->setUpLocalSolr();
  }

 
}
